(()=>{"use strict";function e(){document.querySelectorAll("[data-popup-id]").forEach((e=>{const t=document.getElementById(e.dataset.popupId);e.addEventListener("click",(()=>{t.classList.add("_active")})),t.querySelector(".popup__close").addEventListener("click",(()=>{t.classList.remove("_active")}))})),document.querySelectorAll(".popup__bg").forEach((e=>{e.addEventListener("click",(()=>{e.closest(".popup").classList.remove("_active")}))})),document.querySelector(".formError__send-btn").addEventListener("click",(()=>{document.getElementById("formError-popup").classList.remove("_active"),document.getElementById("formInvite-popup").classList.add("_active")})),document.querySelector(".formInvite__button").addEventListener("click",(()=>{document.getElementById("formInvite-popup").classList.remove("_active")}))}async function t(e,t){const c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),redirect:"follow"},a=await fetch(`http://onemonthmayo-001-site1.itempurl.com/${e}`,c);return await a.text()}function c(e,t){return e.querySelector(`[name="${t}"]`).value.trim()}window.onload=()=>{const a=null!=localStorage.getItem("childId")&&"undefined"!=localStorage.getItem("childId"),n=document.querySelector(".header__menu-btn"),o=document.querySelector(".menu-sidebar");switch(n.addEventListener("click",(function(){o.classList.add("_active")})),o.querySelector(".menu-sidebar__bg").addEventListener("click",(()=>{o.classList.remove("_active")})),o.querySelector(".menu-sidebar__close").addEventListener("click",(()=>{o.classList.remove("_active")})),a?document.querySelector(".header__profile .profile__name").textContent=`${localStorage.getItem("firstName")} ${localStorage.getItem("lastName")}`:"/"!=location.pathname&&(location.pathname="/"),window.location.pathname){case"/":if(a){let e=document.querySelector("main");e.querySelectorAll("section").forEach((e=>{e.classList.add("_inactive")})),document.querySelector("footer").classList.add("_inactive"),e.insertAdjacentHTML("afterbegin",`\n\t\t\t\t<section class="greeting">\n\t\t\t\t\t<div class="greeting__container _container">\n\t\t\t\t\t\t<div class="greeting__title title title_light">Привет, ${localStorage.getItem("firstName")}!</div>\n\t\t\t\t\t\t<div class="greeting__subtitle subtitle subtitle_light">Давай приступим к занятиям!</div>\n\t\t\t\t\t\t<a href="/subjects.html"><button class="greeting__btn btn">Вперёд</button></a>\n\t\t\t\t\t</div>\n\t\t\t\t</section>\n\t\t\t\t`)}else document.querySelector(".menu-sidebar__list").classList.add("_inactive"),document.querySelector(".header__profile").classList.add("_inactive"),document.querySelectorAll(".menu-sidebar__btn").forEach((e=>{e.classList.remove("_inactive")})),function(){document.querySelector("header").classList.add("fixed-header"),document.getElementById("no-account-btn").addEventListener("click",(()=>{document.getElementById("login-popup").classList.remove("_active")})),document.getElementById("footer-arrow").addEventListener("click",(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})}));const e=document.querySelector("#reg-popup");e.addEventListener("submit",(function(c){c.preventDefault();const a=e.querySelector('[name="firstName"]').value,n=e.querySelector('[name="lastName"]').value,o=e.querySelector('[name="levelStuding"]').value,r=e.querySelector('[name="email"]').value;t("api/user/reg",{pas:e.querySelector('[name="pas"]').value,email:r,levelStuding:Number(o),lastName:n,firstName:a}),e.classList.remove("_active")}));const c=document.querySelector("#login-popup");c.addEventListener("submit",(function(e){e.preventDefault(),t("api/user/sign",{email:c.querySelector('[name="email"]').value,pas:c.querySelector('[name="pas"]').value}).then((e=>{const t=JSON.parse(e);localStorage.setItem("childId",t.childId),localStorage.setItem("email",t.email),localStorage.setItem("firstName",t.firstName),localStorage.setItem("lastName",t.lastName),localStorage.setItem("levelStuding",t.levelStuding),localStorage.setItem("point",t.point),localStorage.setItem("spendPoint",t.spendPoint),localStorage.setItem("image",t.image),location.reload()}))}))}(),e();break;case"/subjects.html":t("api/TestSolution/getSubjects",{ChildId:localStorage.getItem("childId")}).then((e=>{const t=JSON.parse(e),c=document.querySelector(".subject-choice__grid");for(let e of t)c.insertAdjacentHTML("beforeend",`\n\t\t\t\t<button data-subject-id="${e.idExec}" class="subject-choice__cell">${e.nameSub}</button>\n\t\t\t\t`);c.childNodes.forEach((e=>{e.addEventListener("click",(function(){localStorage.setItem("curSubjectName",e.textContent),localStorage.setItem("curSubjectId",e.dataset.subjectId),location.pathname="chapters.html"}))}))}));break;case"/chapters.html":document.querySelector(".chapters__title span").textContent=localStorage.getItem("curSubjectName"),t("api/TestSolution/getChapters",{idSubjectExecution:localStorage.getItem("curSubjectId")}).then((e=>{const t=JSON.parse(e),c=document.querySelector(".chapters__grid");t.forEach((e=>{let t=e.access,a="",n="";e.access?(a=`<div class="chapter__progress" value="${e.getProcentChapterDecide}"><span></span></div>`,n='<div class="chapter__progress" value="0"><span></span></div>'):t=" _disabled",c.insertAdjacentHTML("beforeend",`\n\t\t\t\t<div class="chapters__cell chapter ${t}">\n\t\t\t\t\t<div class="chapter__title">${e.nameChapter}</div>\n\t\t\t\t\t<div class="divider chapter__divider"></div>\n\t\t\t\t\t<div class="chapter__description">${e.description}</div>\n\t\t\t\t\t${a}\n\t\t\t\t\t${n}\n\t\t\t\t</div>\n\t\t\t\t`)})),document.querySelectorAll(".chapter__progress").forEach((e=>{e.querySelector("span").style.width=e.getAttribute("value")+"%"})),document.querySelectorAll(".chapter").forEach((e=>{e.classList.contains("_disabled")||e.addEventListener("click",(function(){localStorage.setItem("curChapterName",e.querySelector(".chapter__title").textContent),window.location.pathname="/chapter.html"}))}))}));break;case"/chapter.html":document.querySelector("#theory").addEventListener("click",(function(){window.location.pathname="theory.html"})),document.querySelector("#practice").addEventListener("click",(function(){window.location.pathname="practice.html"})),document.querySelector(".chapter__title span").textContent=localStorage.getItem("curChapterName"),t("api/TestSolution/getChapter",{idSubjectExecution:2}).then((e=>console.log(JSON.parse(e))));break;case"/practice.html":!function(){const e=[{num:1,type:"calc",solved:!0},{num:2,label:"video",type:"logic",solved:!0},{num:3,type:"calc",solved:!0},{num:4,type:"calc",solved:!0},{num:5,label:"video",type:"logic",solved:!0},{num:6,type:"logic",solved:!0},{num:7,type:"graph",solved:!0},{num:8,type:"graph",solved:!0},{num:9,type:"graph",solved:!0},{num:10,label:"star",type:"calc",solved:!0},{num:11,type:"logic"},{num:12,type:"graph"},{num:13,type:"graph"},{num:14,type:"calc"},{num:15,type:"calc"},{num:16,type:"logic"},{num:17,type:"graph"},{num:18,label:"star",type:"graph"},{num:19,type:"calc"},{num:20,type:"logic"},{num:21,type:"logic"},{num:22,type:"graph"},{num:23,type:"calc"},{num:24,type:"graph"}],t=document.querySelector(".practice__tasks");let c=0;for(let a=0;a<e.length;a++){let n,o=10>=a+1?"":" _disabled",r=e[a].label?" "+e[a].label:"",l=e[a].type?" "+e[a].type:"";switch(e[a].solved){case void 0:n="";break;case!0:n=" solved",c++;break;case!1:n=" failed"}if(t.insertAdjacentHTML("beforeend",`\n\t\t<button class="practice__task${r}${o}${l}${n}">${e[a].num}</button>`),10==a+1){let e=c>=10?"":" _disabled";t.insertAdjacentHTML("beforeend",`<button data-pack-header="basic" class="practice__test-btn btn${e}">Пройти тест</button>`)}}document.querySelectorAll(".practice__task").forEach((e=>{e.addEventListener("click",(function(){window.location.pathname="task.html"}))}));const a=document.querySelectorAll(".practice-filter__item");a.forEach((e=>{e.addEventListener("click",(t=>{a.forEach((e=>{e.classList.remove("_selected")})),t.target.classList.add("_selected");const c=e.dataset.filter;document.querySelectorAll(".practice__task").forEach((e=>{e.classList.remove("_hide"),e.classList.contains(c)||"all"==c||e.classList.add("_hide")}))}))}));const n=document.querySelector(".practice__test-btn");n.addEventListener("click",(function(){localStorage.setItem("testPackHeader",n.dataset.packHeader),location.pathname="/test.html"}))}();break;case"/theory.html":document.querySelector("#execute_tasks").addEventListener("click",(function(){window.location.pathname="practice.html"}));break;case"/task.html":e();break;case"/test.html":t("api/TestSolution/begintest",{idExecChapter:Number(localStorage.getItem("curSubjectId")),testPackHeader:localStorage.getItem("testPackHeader")}).then((e=>{console.log(e)})),e();break;case"/account.html":!function(){document.querySelector(".account__title").textContent=`Привет, ${localStorage.getItem("firstName")}!`,document.querySelector(".user__name").textContent=`${localStorage.getItem("firstName")} ${localStorage.getItem("lastName")}`,document.querySelector(".user__class").textContent=`${localStorage.getItem("levelStuding")} класс`;const e=Number(localStorage.getItem("point")),t=Number(localStorage.getItem("spendPoint")),c=document.querySelectorAll(".account__results_text p");c[0].textContent=e,c[1].textContent=t;const a=document.querySelector(".account__scores__progress");a.querySelector(".progress").style.strokeDashoffset=(e-t)/e*628||628,a.querySelector(".circle-progress__value").textContent=e-t,document.addEventListener("click",(function(e){const t=e.target;t.classList.contains("account__exit-btn")&&(localStorage.clear(),window.location.pathname="/"),t.classList.contains("option")?(document.querySelectorAll(".account__dialog.dialog").forEach((e=>{e.classList.remove("_active")})),t.querySelector(".account__dialog.dialog").classList.add("_active")):document.querySelectorAll(".account__dialog.dialog").forEach((e=>{e.classList.remove("_active")})),t.classList.contains("account__subject")&&!t.classList.contains("account__addSubject")&&(window.location.pathname="subject-dashboard.html"),t.classList.contains("account__addSubject")&&(window.location.pathname="subjects.html")}))}();break;case"/subject-dashboard.html":document.querySelector("button.subject-dashboard__chapters-see-all-btn").addEventListener("click",(function(){window.location.pathname="chapters.html"})),document.querySelector("button.rating__see-all-btn").addEventListener("click",(function(){window.location.pathname="rating.html"}));break;case"/admin.html":!function(){const e=document.querySelector("#addSubject");e.querySelector("button").addEventListener("click",(function(){t("api/creating/subject",{name:e.querySelector("input").value.trim(),levelStuding:Number(e.querySelector("select").value)})}));const a=document.querySelector("#addChapter");a.querySelector("button").addEventListener("click",(function(){t("api/creating/chapter",{name:c(a,"name-chapter"),Description:c(a,"descr"),levelStuding:Number(a.querySelector("select").value),nameSubject:c(a,"name-subject"),access:a.querySelector(".admin__checkbox input").checked})}));const n=document.querySelector("#addTestPack");n.querySelector("button").addEventListener("click",(function(){t("api/creating/testpack",{levelStuding:Number(n.querySelector("select").value),subjectName:c(n,"subject-name"),chapterName:c(n,"chapter-name"),header:n.querySelector(".admin__checkbox input").checked?"addit":"basic"})}));const o=document.querySelector("#addTestTask");o.querySelector(".admin__radio-add").addEventListener("click",(function(e){e.target.insertAdjacentHTML("beforebegin",'\n\t\t<div class="admin__radio">\n\t\t\t<input type="radio" name="answer">\n\t\t\t<input name="answer-input" class="admin__input" type="text" />\n\t\t</div>\n\t\t')})),o.querySelector("button").addEventListener("click",(function(){let e=[];o.querySelectorAll(".admin__radio").forEach((t=>{e.push({textAnswear:c(t,"answer-input"),accuracy:t.querySelector('[type="radio"]').checked})})),t("api/creating/testtask",{textQuestion:c(o,"question"),CreatingAnswearOnTaskModels:e,levelStuding:Number(o.querySelector("select").value),subjectName:c(o,"subject-name"),chapterName:c(o,"chapter-name"),testPackHeader:o.querySelector(".admin__checkbox input").checked?"addit":"basic"})}))}()}}})();